var Ve=Object.defineProperty;var J=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var O=(_,i,s)=>i in _?Ve(_,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):_[i]=s,K=(_,i)=>{for(var s in i||(i={}))ke.call(i,s)&&O(_,s,i[s]);if(J)for(var s of J(i))xe.call(i,s)&&O(_,s,i[s]);return _};var S=(_,i,s)=>new Promise((T,y)=>{var $=f=>{try{w(s.next(f))}catch(b){y(b)}},z=f=>{try{w(s.throw(f))}catch(b){y(b)}},w=f=>f.done?T(f.value):Promise.resolve(f.value).then($,z);w((s=s.apply(_,i)).next())});import{_ as Ce,u as Te,r as m,c as Q,s as Ue,o as Se,d as D,e as c,f as l,w as t,l as De,j as n,m as u,i as v,D as Fe,F as W,k as X,G as $e,g as F,t as I,h as Y,H as C,E as d,b as ze}from"./index-jGo40FSK.js";const Be={class:"terminology-view"},Le={key:0,class:"empty-state"},Ee={key:1},Ne={class:"operations-bar"},Ae={class:"search-section"},Ie={class:"action-buttons"},Pe={class:"pagination-container"},he={key:0,class:"selected-file-info"},je={__name:"TerminologyView",setup(_){const i=Te(),s=m([]),T=m(""),y=m(""),$=m(1),z=m(20),w=m(!1),f=m(!1),b=m(!1),g=m(null),U=m(!1),B=m(!1),L=m(null),r=m({term:"",translation:"",domain:"",notes:""}),q=m(),M=Q(()=>{let a=s.value;if(T.value){const V=T.value.toLowerCase();a=a.filter(k=>k.term.toLowerCase().includes(V)||k.translation&&k.translation.toLowerCase().includes(V)||k.notes&&k.notes.toLowerCase().includes(V))}y.value&&(a=a.filter(V=>V.domain===y.value));const e=($.value-1)*z.value,p=e+z.value;return a.slice(e,p)}),R=Q(()=>{const a=new Set;return s.value.forEach(e=>{e.domain&&a.add(e.domain)}),Array.from(a).sort()}),E=()=>S(null,null,function*(){w.value=!0;try{const a=yield C.getTerminologyList();a.success?s.value=a.terms||[]:d.error(a.message||"åŠ è½½æœ¯è¯­åˆ—è¡¨å¤±è´¥")}catch(a){console.error("åŠ è½½æœ¯è¯­åˆ—è¡¨å¤±è´¥:",a),d.error("åŠ è½½æœ¯è¯­åˆ—è¡¨å¤±è´¥")}finally{w.value=!1}}),Z=a=>{L.value=a,r.value=K({},a),U.value=!0},ee=()=>S(null,null,function*(){try{if(yield q.value.validate(),f.value=!0,L.value)yield C.deleteTerminology(L.value.term),yield C.addTerminology(r.value.term,r.value.translation,r.value.domain||"general",r.value.notes||""),d.success("æœ¯è¯­æ›´æ–°æˆåŠŸ");else{const a=yield C.addTerminology(r.value.term,r.value.translation,r.value.domain||"general",r.value.notes||"");a.success?d.success("æœ¯è¯­æ·»åŠ æˆåŠŸ"):d.error(a.message||"æœ¯è¯­æ·»åŠ å¤±è´¥")}U.value=!1,te(),yield E()}catch(a){console.error("ä¿å­˜æœ¯è¯­å¤±è´¥:",a),d.error("ä¿å­˜å¤±è´¥")}finally{f.value=!1}}),le=a=>S(null,null,function*(){try{yield ze.confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæœ¯è¯­å—ï¼Ÿ","åˆ é™¤ç¡®è®¤",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"});const e=yield C.deleteTerminology(a.term);e.success?(d.success("æœ¯è¯­åˆ é™¤æˆåŠŸ"),yield E()):d.error(e.message||"åˆ é™¤å¤±è´¥")}catch(e){e!=="cancel"&&(console.error("åˆ é™¤æœ¯è¯­å¤±è´¥:",e),d.error("åˆ é™¤å¤±è´¥"))}}),te=()=>{r.value={term:"",translation:"",domain:"",notes:""},L.value=null},oe=()=>{B.value=!0},ae=()=>S(null,null,function*(){try{yield C.exportTerminology(),d.success("å¯¼å‡ºå®Œæˆ")}catch(a){console.error("å¯¼å‡ºå¤±è´¥:",a),d.error("å¯¼å‡ºå¤±è´¥")}}),ne=a=>{g.value=a.raw,d.success(`å·²é€‰æ‹©æ–‡ä»¶: ${a.name}`)},se=()=>S(null,null,function*(){if(!g.value){d.warning("è¯·å…ˆé€‰æ‹©æ–‡ä»¶");return}try{b.value=!0;const a=yield C.importTerminology(g.value);a.success?(d.success(a.message),B.value=!1,g.value=null,yield E()):d.error(a.message||"å¯¼å…¥å¤±è´¥")}catch(a){console.error("å¯¼å…¥å¤±è´¥:",a),d.error("å¯¼å…¥å¤±è´¥")}finally{b.value=!1}}),re=a=>a?new Date(a).toLocaleDateString():"-";return Ue(()=>i.isConfigSelected,a=>{a&&s.value.length===0&&E()}),Se(()=>{i.isConfigSelected&&E()}),(a,e)=>{const p=n("el-button"),V=n("el-empty"),k=n("Search"),N=n("el-icon"),P=n("el-input"),j=n("el-option"),G=n("el-select"),ue=n("Plus"),ie=n("Upload"),de=n("Download"),A=n("el-text"),x=n("el-table-column"),me=n("el-tag"),pe=n("el-table"),ce=n("el-pagination"),h=n("el-form-item"),fe=n("el-form"),H=n("el-dialog"),_e=n("upload-filled"),ve=n("el-upload"),ge=n("el-alert"),ye=n("el-card"),we=$e("loading");return c(),D("div",Be,[l(ye,{class:"header-card"},{header:t(()=>e[13]||(e[13]=[v("div",{class:"card-header"},[v("span",null,"ğŸ“š ä¸“æœ‰åè¯ç®¡ç†"),v("p",null,"ç®¡ç†ç¿»è¯‘ä¸­çš„ä¸“ä¸šæœ¯è¯­å’Œå›ºå®šè¯‘å")],-1)])),default:t(()=>[De(i).isConfigSelected?(c(),D("div",Ee,[v("div",Ne,[v("div",Ae,[l(P,{modelValue:T.value,"onUpdate:modelValue":e[1]||(e[1]=o=>T.value=o),placeholder:"æœç´¢æœ¯è¯­æˆ–è¯‘å...",style:{width:"300px"},clearable:""},{prefix:t(()=>[l(N,null,{default:t(()=>[l(k)]),_:1})]),_:1},8,["modelValue"]),l(G,{modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=o=>y.value=o),style:{width:"150px","margin-left":"12px"}},{default:t(()=>[l(j,{label:"å…¨éƒ¨åˆ†ç±»",value:""}),(c(!0),D(W,null,X(R.value,o=>(c(),F(j,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),v("div",Ie,[l(p,{type:"primary",onClick:e[3]||(e[3]=o=>U.value=!0)},{default:t(()=>[l(N,null,{default:t(()=>[l(ue)]),_:1}),e[15]||(e[15]=u(" æ·»åŠ æœ¯è¯­ "))]),_:1,__:[15]}),l(p,{onClick:oe},{default:t(()=>[l(N,null,{default:t(()=>[l(ie)]),_:1}),e[16]||(e[16]=u(" å¯¼å…¥ "))]),_:1,__:[16]}),l(p,{onClick:ae},{default:t(()=>[l(N,null,{default:t(()=>[l(de)]),_:1}),e[17]||(e[17]=u(" å¯¼å‡º "))]),_:1,__:[17]})])]),Fe((c(),F(pe,{data:M.value,style:{width:"100%"},stripe:""},{default:t(()=>[l(x,{prop:"term",label:"åŸæœ¯è¯­","min-width":"150"},{default:t(o=>[l(A,{type:"primary"},{default:t(()=>[u(I(o.row.term),1)]),_:2},1024)]),_:1}),l(x,{prop:"translation",label:"è¯‘å","min-width":"150"},{default:t(o=>[o.row.translation?(c(),F(A,{key:0,type:"primary"},{default:t(()=>[u(I(o.row.translation),1)]),_:2},1024)):(c(),F(A,{key:1,type:"info"},{default:t(()=>e[18]||(e[18]=[u("æœªç¿»è¯‘")])),_:1,__:[18]}))]),_:1}),l(x,{prop:"domain",label:"åˆ†ç±»",width:"120"},{default:t(o=>[o.row.domain?(c(),F(me,{key:0,size:"small"},{default:t(()=>[u(I(o.row.domain),1)]),_:2},1024)):Y("",!0)]),_:1}),l(x,{prop:"notes",label:"è¯´æ˜","min-width":"200","show-overflow-tooltip":""}),l(x,{prop:"frequency",label:"ä½¿ç”¨é¢‘ç‡",width:"100",sortable:""},{default:t(o=>[l(A,null,{default:t(()=>[u(I(o.row.frequency||0),1)]),_:2},1024)]),_:1}),l(x,{prop:"lastUsed",label:"æœ€åä½¿ç”¨",width:"120"},{default:t(o=>[l(A,{type:"info",size:"small"},{default:t(()=>[u(I(re(o.row.lastUsed)),1)]),_:2},1024)]),_:1}),l(x,{label:"æ“ä½œ",width:"150",fixed:"right"},{default:t(o=>[l(p,{type:"primary",size:"small",onClick:be=>Z(o.row)},{default:t(()=>e[19]||(e[19]=[u(" ç¼–è¾‘ ")])),_:2,__:[19]},1032,["onClick"]),l(p,{type:"danger",size:"small",onClick:be=>le(o.row)},{default:t(()=>e[20]||(e[20]=[u(" åˆ é™¤ ")])),_:2,__:[20]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[we,w.value]]),v("div",Pe,[l(ce,{modelValue:$.value,"onUpdate:modelValue":e[4]||(e[4]=o=>$.value=o),"page-size":z.value,total:M.value.length,layout:"prev, pager, next, jumper, total"},null,8,["modelValue","page-size","total"])]),l(H,{modelValue:U.value,"onUpdate:modelValue":e[10]||(e[10]=o=>U.value=o),title:L.value?"ç¼–è¾‘æœ¯è¯­":"æ·»åŠ æœ¯è¯­",width:"600px"},{footer:t(()=>[l(p,{onClick:e[9]||(e[9]=o=>U.value=!1)},{default:t(()=>e[21]||(e[21]=[u("å–æ¶ˆ")])),_:1,__:[21]}),l(p,{type:"primary",onClick:ee,loading:f.value},{default:t(()=>e[22]||(e[22]=[u("ç¡®å®š")])),_:1,__:[22]},8,["loading"])]),default:t(()=>[l(fe,{model:r.value,"label-width":"80px",ref_key:"termFormRef",ref:q},{default:t(()=>[l(h,{label:"åŸæœ¯è¯­",prop:"term",rules:[{required:!0,message:"è¯·è¾“å…¥åŸæœ¯è¯­"}]},{default:t(()=>[l(P,{modelValue:r.value.term,"onUpdate:modelValue":e[5]||(e[5]=o=>r.value.term=o),placeholder:"è¯·è¾“å…¥åŸæœ¯è¯­"},null,8,["modelValue"])]),_:1}),l(h,{label:"è¯‘å",prop:"translation"},{default:t(()=>[l(P,{modelValue:r.value.translation,"onUpdate:modelValue":e[6]||(e[6]=o=>r.value.translation=o),placeholder:"è¯·è¾“å…¥è¯‘å"},null,8,["modelValue"])]),_:1}),l(h,{label:"åˆ†ç±»",prop:"domain"},{default:t(()=>[l(G,{modelValue:r.value.domain,"onUpdate:modelValue":e[7]||(e[7]=o=>r.value.domain=o),placeholder:"é€‰æ‹©æˆ–è¾“å…¥åˆ†ç±»",filterable:"","allow-create":""},{default:t(()=>[(c(!0),D(W,null,X(R.value,o=>(c(),F(j,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(h,{label:"è¯´æ˜",prop:"notes"},{default:t(()=>[l(P,{modelValue:r.value.notes,"onUpdate:modelValue":e[8]||(e[8]=o=>r.value.notes=o),type:"textarea",rows:3,placeholder:"æœ¯è¯­è¯´æ˜æˆ–ä½¿ç”¨åœºæ™¯"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(H,{modelValue:B.value,"onUpdate:modelValue":e[12]||(e[12]=o=>B.value=o),title:"å¯¼å…¥æœ¯è¯­",width:"500px"},{footer:t(()=>[l(p,{onClick:e[11]||(e[11]=o=>{B.value=!1,g.value=null})},{default:t(()=>e[25]||(e[25]=[u("å–æ¶ˆ")])),_:1,__:[25]}),l(p,{type:"primary",onClick:se,loading:b.value,disabled:!g.value},{default:t(()=>e[26]||(e[26]=[u(" å¯¼å…¥ ")])),_:1,__:[26]},8,["loading","disabled"])]),default:t(()=>[l(ve,{ref:"uploadRef","auto-upload":!1,"on-change":ne,"show-file-list":!1,accept:".json",drag:""},{tip:t(()=>e[23]||(e[23]=[v("div",{class:"el-upload__tip"}," åªæ”¯æŒ JSON æ ¼å¼æ–‡ä»¶ ",-1)])),default:t(()=>[l(N,{class:"el-icon--upload"},{default:t(()=>[l(_e)]),_:1}),e[24]||(e[24]=v("div",{class:"el-upload__text"},[u(" å°†æ–‡ä»¶æ‹–åˆ°æ­¤å¤„ï¼Œæˆ–"),v("em",null,"ç‚¹å‡»ä¸Šä¼ ")],-1))]),_:1,__:[24]},512),g.value?(c(),D("div",he,[l(ge,{title:`å·²é€‰æ‹©æ–‡ä»¶: ${g.value.name}`,type:"success",closable:!1,"show-icon":""},null,8,["title"])])):Y("",!0)]),_:1},8,["modelValue"])])):(c(),D("div",Le,[l(V,{description:"è¯·å…ˆé€‰æ‹©é…ç½®"},{default:t(()=>[l(p,{type:"primary",onClick:e[0]||(e[0]=o=>a.$router.push("/"))},{default:t(()=>e[14]||(e[14]=[u(" å»é…ç½®ç®¡ç† ")])),_:1,__:[14]})]),_:1})]))]),_:1})])}}},Re=Ce(je,[["__scopeId","data-v-4e420ba0"]]);export{Re as default};
