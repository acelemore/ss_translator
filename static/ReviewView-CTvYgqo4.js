var tt=Object.defineProperty,at=Object.defineProperties;var lt=Object.getOwnPropertyDescriptors;var me=Object.getOwnPropertySymbols;var nt=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable;var we=(T,m,d)=>m in T?tt(T,m,{enumerable:!0,configurable:!0,writable:!0,value:d}):T[m]=d,ce=(T,m)=>{for(var d in m||(m={}))nt.call(m,d)&&we(T,d,m[d]);if(me)for(var d of me(m))ot.call(m,d)&&we(T,d,m[d]);return T},pe=(T,m)=>at(T,lt(m));var k=(T,m,d)=>new Promise((A,p)=>{var F=h=>{try{v(d.next(h))}catch(b){p(b)}},$=h=>{try{v(d.throw(h))}catch(b){p(b)}},v=h=>h.done?A(h.value):Promise.resolve(h.value).then(F,$);v((d=d.apply(T,m)).next())});import{_ as st,u as rt,r as g,s as xe,c as Q,o as it,d as f,e as c,f as l,w as o,l as X,j as x,m as r,h as R,i as s,B as Ce,t as y,F as ve,k as _e,C as ut,T as dt,p as Y,E as u,b as q,q as ke,D as ct,A as Te,g as Z}from"./index-B0OZ2IFU.js";const pt={class:"review-view"},vt={key:0,class:"empty-state"},_t={key:1},gt={key:0,class:"files-section"},ft={class:"files-header"},ht={class:"header-actions"},yt={class:"file-search-container"},mt={key:0,class:"search-stats"},wt={key:0,class:"empty-state"},xt={key:1,class:"empty-state"},Ct={key:2,class:"translation-files"},kt={class:"file-info"},Tt={class:"file-actions"},bt={key:1,class:"review-section"},Lt={class:"review-header"},Vt={class:"review-stats"},Mt={class:"filter-actions"},At={class:"filter-row"},St={class:"search-container"},Ft={class:"search-fields-selector"},$t={class:"field-option"},zt={class:"field-option"},Bt={class:"field-option"},jt={class:"field-option"},Ut={class:"field-actions"},Pt={class:"action-row"},Rt={class:"action-group"},Et={class:"action-group"},Ot={class:"translations-container"},It={class:"translation-header"},Dt={class:"item-status"},Qt={class:"item-number"},qt={class:"translation-content"},Ht={class:"content-row"},Nt={class:"content-section"},Jt=["innerHTML"],Gt={class:"content-row"},Wt={class:"content-section"},Kt=["innerHTML"],Xt={key:1},Yt={class:"content-row"},Zt={class:"content-section"},ea={key:0,class:"preview-text"},ta=["innerHTML"],aa={key:0,class:"context-info"},la={key:1,class:"llm-reason"},na={class:"translation-actions"},oa={key:2,class:"suggestions"},sa={class:"suggestion-list"},ra={class:"pagination-container"},ia={__name:"ReviewView",setup(T){const m=rt(),d=g([]),A=g(null),p=g([]),F=g(""),$=g(""),v=g({original:!0,translation:!0,approved:!0,context:!0}),h=g("all"),b=g("all"),B=g("all"),E=g(1),H=g(50),N=g(!1),ee=g(!1),te=g(!1),ae=g(!1),le=g(!1),ne=g({}),oe=g(!1),j=g(new Set);g(0);const L=()=>{E.value=1},be=()=>{v.value={original:!0,translation:!0,approved:!0,context:!0},L()},Le=()=>{v.value={original:!1,translation:!1,approved:!1,context:!1},L()},Ve=e=>{E.value=e;const t=document.querySelector(".translations-container");t&&t.scrollIntoView({behavior:"smooth",block:"start"})};xe(j,e=>{e.size>0&&e.size%5===0&&qe()},{deep:!0});const J=Q(()=>{if(!$.value)return d.value;const e=$.value.toLowerCase();return d.value.filter(t=>t.path.toLowerCase().includes(e))}),ge=Q(()=>Object.values(v.value).filter(Boolean).length),Me=Q(()=>{const e=[];return v.value.original&&e.push("åŸæ–‡"),v.value.translation&&e.push("ç¿»è¯‘"),v.value.approved&&e.push("å®¡æ ¸"),v.value.context&&e.push("ä¸Šä¸‹æ–‡"),e.length===0?"æ— å­—æ®µ":e.length===4?"å…¨éƒ¨å­—æ®µ":e.join("ã€")}),V=Q(()=>{let e=p.value;if(F.value){const t=F.value.toLowerCase(),n=fe(t);e=e.filter(i=>{const _=[];if(v.value.original){const w=re(i.original_text).toLowerCase();_.push(i.original_text.toLowerCase().includes(t)||i.original_text.toLowerCase().includes(n)||w.includes(t))}if(v.value.translation&&i.translation){const w=re(i.translation).toLowerCase();_.push(i.translation.toLowerCase().includes(t)||i.translation.toLowerCase().includes(n)||w.includes(t))}if(v.value.approved&&i.approved_text){const w=re(i.approved_text).toLowerCase();_.push(i.approved_text.toLowerCase().includes(t)||i.approved_text.toLowerCase().includes(n)||w.includes(t))}return v.value.context&&i.context&&_.push(i.context.toLowerCase().includes(t)),_.length>0&&_.some(w=>w===!0)})}return h.value!=="all"&&(e=e.filter(t=>h.value==="approved"?t.approved===!0:h.value==="unapproved"?t.approved!==!0:h.value==="translated"?t.translation&&t.translation.trim()!=="":h.value==="empty"?!t.translation||t.translation.trim()==="":!0)),b.value!=="all"&&(e=e.filter(t=>b.value==="suggested"?t.is_suggested_to_translate===!0:b.value==="not_suggested"?t.is_suggested_to_translate===!1:!0)),B.value!=="all"&&(e=e.filter(t=>B.value==="word_only"?t.original_text&&!t.original_text.includes(" "):B.value==="quote_mismatch"?G(t):!0)),e}),Ae=Q(()=>{const e=(E.value-1)*H.value,t=e+H.value;return V.value.slice(e,t)}),Se=()=>p.value.filter(e=>G(e)).length,Fe=()=>p.value.filter(e=>e.approved===!0).length,$e=()=>p.value.filter(e=>e.approved!==!0).length,O=()=>k(null,null,function*(){try{const e=yield Y.getTranslations();e.error?u.error(e.error):d.value=e}catch(e){u.error("åŠ è½½ç¿»è¯‘æ–‡ä»¶å¤±è´¥")}}),ze=e=>k(null,null,function*(){try{A.value=e;const t=yield Y.getTranslationReview(e.path);t.error?u.error(t.error):(p.value=t.translations.map(n=>pe(ce({},n),{suggestions:[]})),E.value=1,h.value="unapproved")}catch(t){u.error("åŠ è½½ç¿»è¯‘å†…å®¹å¤±è´¥")}}),se=()=>k(null,null,function*(){if(A.value)try{const e=yield Y.getTranslationReview(A.value.path);if(e.error)u.error(e.error);else{const t=h.value,n=b.value,i=B.value,_=F.value,w=E.value;p.value=e.translations.map(P=>pe(ce({},P),{suggestions:[]})),yield ke(),h.value=t,b.value=n,B.value=i,F.value=_,E.value=w,yield ke(),j.value.clear(),O()}}catch(e){console.error("åˆ·æ–°å½“å‰æ–‡ä»¶æ•°æ®å¤±è´¥:",e)}}),Be=()=>k(null,null,function*(){if(j.value.size>0)try{yield I(),u.success("è¿”å›æ—¶è‡ªåŠ¨ä¿å­˜æˆåŠŸ")}catch(e){u.error("è‡ªåŠ¨ä¿å­˜å¤±è´¥ï¼Œä½†ä»ç„¶è¿”å›æ–‡ä»¶åˆ—è¡¨"),console.error("è¿”å›æ—¶è‡ªåŠ¨ä¿å­˜å¤±è´¥:",e)}A.value=null,p.value=[],j.value.clear(),h.value="all",b.value="all",B.value="all",F.value="",$.value="",O()}),U=e=>{const t=p.value.findIndex(n=>n===e);t!==-1&&(j.value.add(t),e.approved_text&&e.approved_text.trim()!==""&&(e.approved=!0))},je=e=>{e.approved_text=e.translation||"",U(e)},Ue=e=>{e.approved_text="",e.approved=!1,U(e)},Pe=e=>{e.approved_text=e.original_text||"",e.approved=!0,U(e)},Re=e=>p.value.findIndex(t=>t===e),re=e=>e&&e.replace(/[\u0000-\u001f\u007f-\u009f]/g,t=>`\\u${t.charCodeAt(0).toString(16).padStart(4,"0")}`),ie=e=>e&&e.replace(/[\u0000-\u001f\u007f-\u009f]/g,t=>`<span class="unicode-escape">\\u${t.charCodeAt(0).toString(16).padStart(4,"0")}</span>`),fe=e=>e&&e.replace(/\\u([0-9a-fA-F]{4})/g,(t,n)=>String.fromCharCode(parseInt(n,16))),he=e=>{if(!e)return!1;const t=(e.match(/"/g)||[]).length,n=(e.match(/"/g)||[]).length,i=(e.match(/"/g)||[]).length,_=(e.match(/ã€Œ/g)||[]).length,w=(e.match(/ã€/g)||[]).length,P=(e.match(/ã€/g)||[]).length,z=(e.match(/ã€/g)||[]).length;return[t,n,i,_,w,P,z].some(D=>D%2!==0)},G=e=>e.approved_text&&e.approved_text.trim()!==""?he(e.approved_text):e.translation&&e.translation.trim()!==""?he(e.translation):!1,Ee=e=>{const t=fe(e.approved_text);t!==e.approved_text&&(e.approved_text=t),U(e)},Oe=()=>k(null,null,function*(){try{const e=V.value.length;yield q.confirm(`ç¡®å®šè¦å°†å½“å‰è¿‡æ»¤çš„ ${e} æ¡ç¿»è¯‘å…¨éƒ¨åº”ç”¨LLMç¿»è¯‘ç»“æœå—ï¼Ÿè¿™å°†è¦†ç›–å·²æœ‰çš„å®¡æ ¸ç»“æœã€‚`,"æ‰¹é‡åº”ç”¨LLMç¿»è¯‘ç¡®è®¤",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}),ee.value=!0,V.value.forEach(t=>{const n=p.value.findIndex(i=>i===t);n!==-1&&(p.value[n].approved_text=t.translation||"",p.value[n].approved=!0,U(t))}),yield I(),yield se(),u.success(`å·²å°† ${e} æ¡ç¿»è¯‘åº”ç”¨LLMç¿»è¯‘ç»“æœå¹¶ä¿å­˜`)}catch(e){}finally{ee.value=!1}}),Ie=()=>k(null,null,function*(){try{const e=V.value.length;yield q.confirm(`ç¡®å®šè¦å°†å½“å‰è¿‡æ»¤çš„ ${e} æ¡ç¿»è¯‘å…¨éƒ¨ä¿ç•™åŸæ–‡å—ï¼Ÿ`,"æ‰¹é‡ä¿ç•™åŸæ–‡ç¡®è®¤",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}),te.value=!0,V.value.forEach(t=>{const n=p.value.findIndex(i=>i===t);n!==-1&&(p.value[n].approved_text=t.original_text||"",p.value[n].approved=!0,U(t))}),yield I(),yield se(),u.success(`å·²å°† ${e} æ¡ç¿»è¯‘æ ‡è®°ä¸ºä¿ç•™åŸæ–‡å¹¶ä¿å­˜`)}catch(e){}finally{te.value=!1}}),De=()=>k(null,null,function*(){try{const e=V.value.length;yield q.confirm(`ç¡®å®šè¦é‡ç½®å½“å‰è¿‡æ»¤çš„ ${e} æ¡ç¿»è¯‘çš„å®¡æ ¸çŠ¶æ€å—ï¼Ÿè¿™å°†æ¸…ç©ºæ‰€æœ‰å®¡æ ¸ç»“æœå¹¶å°†çŠ¶æ€è®¾ç½®ä¸ºæœªå®¡æ ¸ã€‚`,"é‡ç½®å®¡æ ¸çŠ¶æ€ç¡®è®¤",{confirmButtonText:"ç¡®å®šé‡ç½®",cancelButtonText:"å–æ¶ˆ",type:"warning",dangerouslyUseHTMLString:!0,message:`<div>
          <p>æ­¤æ“ä½œå°†ï¼š</p>
          <ul style="text-align: left; margin: 10px 0;">
            <li>æ¸…ç©ºæ‰€æœ‰å·²å®¡æ ¸çš„ç¿»è¯‘ç»“æœ</li>
            <li>å°†å®¡æ ¸çŠ¶æ€è®¾ç½®ä¸º"æœªå®¡æ ¸"</li>
            <li>è‡ªåŠ¨ä¿å­˜ä¿®æ”¹</li>
          </ul>
          <p><strong>æ³¨æ„ï¼šæ­¤æ“ä½œä¸å¯æ’¤é”€ï¼</strong></p>
        </div>`}),ae.value=!0,V.value.forEach(t=>{const n=p.value.findIndex(i=>i===t);n!==-1&&(p.value[n].approved_text="",p.value[n].approved=!1,U(t))}),yield I(),yield se(),u.success(`å·²é‡ç½® ${e} æ¡ç¿»è¯‘çš„å®¡æ ¸çŠ¶æ€å¹¶ä¿å­˜`)}catch(e){}finally{ae.value=!1}}),Qe=(e,t)=>{e.approved_text=t,U(e)},I=()=>k(null,null,function*(){try{N.value=!0;const e=yield Y.saveTranslationReview(A.value.path,p.value);e.success?(u.success("å®¡æ ¸ç»“æœä¿å­˜æˆåŠŸ"),j.value.clear(),O()):u.error(e.message)}catch(e){u.error("ä¿å­˜å®¡æ ¸ç»“æœå¤±è´¥")}finally{N.value=!1}}),qe=()=>k(null,null,function*(){if(j.value.size!==0)try{const e=j.value.size;yield I(),u.success(`è‡ªåŠ¨ä¿å­˜æˆåŠŸ (${e} æ¡ä¿®æ”¹)`)}catch(e){console.error("è‡ªåŠ¨ä¿å­˜å¤±è´¥:",e)}}),ye=e=>e.total_count===0?100:Math.round(e.approved_count/e.total_count*100),He=e=>{const t=ye(e);return t===100?"#67c23a":t>=70?"#e6a23c":"#f56c6c"},W=e=>e.total_count===0?!1:e.total_count>0&&e.approved_count===e.total_count,ue=e=>e.total_count===0,de=Q(()=>{const e=J.value.filter(t=>!ue(t));return e.length>0&&e.every(t=>W(t))}),Ne=e=>k(null,null,function*(){if(ue(e)){u.info("è¯¥æ–‡ä»¶æ²¡æœ‰ç¿»è¯‘å†…å®¹ï¼Œæ— éœ€åº”ç”¨ç¿»è¯‘");return}if(!W(e)){u.warning("è¯·å…ˆå®Œæˆæ­¤æ–‡ä»¶çš„å®¡æ ¸");return}try{yield q.confirm(`ç¡®å®šè¦åº”ç”¨æ–‡ä»¶ "${e.path}" çš„ç¿»è¯‘å—ï¼Ÿ`,"åº”ç”¨ç¿»è¯‘ç¡®è®¤",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}),ne.value[e.path]=!0;const n=yield(yield fetch("/api/apply-translations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_path:e.path,apply_all:!1})})).json();n.success?u.success(`æ–‡ä»¶ "${e.path}" ç¿»è¯‘åº”ç”¨æˆåŠŸ`):u.error(n.message||"åº”ç”¨ç¿»è¯‘å¤±è´¥")}catch(t){t!=="cancel"&&u.error("åº”ç”¨ç¿»è¯‘å¤±è´¥")}finally{ne.value[e.path]=!1}}),Je=()=>k(null,null,function*(){if(!de.value){u.warning("è¯·å…ˆå®Œæˆæ‰€æœ‰æ–‡ä»¶çš„å®¡æ ¸");return}try{yield q.confirm(`ç¡®å®šè¦åº”ç”¨æ‰€æœ‰æ–‡ä»¶çš„ç¿»è¯‘å—ï¼Ÿå…± ${d.value.length} ä¸ªæ–‡ä»¶ã€‚`,"æ‰¹é‡åº”ç”¨ç¿»è¯‘ç¡®è®¤",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}),le.value=!0;const t=yield(yield fetch("/api/apply-translations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apply_all:!0})})).json();t.success?u.success("æ‰€æœ‰æ–‡ä»¶ç¿»è¯‘åº”ç”¨æˆåŠŸ"):u.error(t.message||"åº”ç”¨ç¿»è¯‘å¤±è´¥")}catch(e){e!=="cancel"&&u.error("åº”ç”¨ç¿»è¯‘å¤±è´¥")}finally{le.value=!1}}),Ge=()=>k(null,null,function*(){try{yield q.confirm("ç¡®å®šè¦å¯¼å‡ºç¿»è¯‘åŒ…å—ï¼Ÿè¿™å°†æ‰“åŒ…æ‰€æœ‰å·²ç¿»è¯‘çš„æ–‡ä»¶ã€‚","å¯¼å‡ºç¿»è¯‘åŒ…ç¡®è®¤",{confirmButtonText:"ç¡®å®šå¯¼å‡º",cancelButtonText:"å–æ¶ˆ",type:"info"}),oe.value=!0;const e=yield fetch("/api/export_translation_package",{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok){const t=e.headers.get("content-type");if(t&&t.includes("application/zip")){const n=yield e.blob(),i=window.URL.createObjectURL(n),_=document.createElement("a");_.style.display="none",_.href=i;const w=e.headers.get("content-disposition");let P="translation_package.zip";if(w){const z=w.match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/);z&&z[1]&&(P=z[1].replace(/['"]/g,""))}_.download=P,document.body.appendChild(_),_.click(),window.URL.revokeObjectURL(i),document.body.removeChild(_),u.success("ç¿»è¯‘åŒ…å¯¼å‡ºæˆåŠŸ")}else{const n=yield e.json();n.success?u.success("ç¿»è¯‘åŒ…å¯¼å‡ºæˆåŠŸ"):u.error(n.message||"å¯¼å‡ºç¿»è¯‘åŒ…å¤±è´¥")}}else{const t=yield e.json();u.error(t.message||"å¯¼å‡ºç¿»è¯‘åŒ…å¤±è´¥")}}catch(e){e!=="cancel"&&(console.error("å¯¼å‡ºç¿»è¯‘åŒ…å¤±è´¥:",e),u.error("å¯¼å‡ºç¿»è¯‘åŒ…å¤±è´¥"))}finally{oe.value=!1}});return xe(()=>m.isConfigSelected,e=>{e&&d.value.length===0&&O()}),it(()=>{m.isConfigSelected&&O()}),(e,t)=>{const n=x("el-button"),i=x("el-empty"),_=x("el-icon"),w=x("el-input"),P=x("el-progress"),z=x("el-card"),M=x("el-tag"),D=x("el-checkbox"),We=x("el-divider"),Ke=x("el-dropdown-menu"),Xe=x("el-dropdown"),C=x("el-option"),K=x("el-select"),Ye=x("el-alert"),Ze=x("el-pagination");return c(),f("div",pt,[l(z,{class:"header-card"},{header:o(()=>t[12]||(t[12]=[s("div",{class:"card-header"},[s("span",null,"ğŸ“ ç¿»è¯‘å®¡æ ¸"),s("p",null,"å®¡æ ¸å’Œç¼–è¾‘ç¿»è¯‘å†…å®¹")],-1)])),default:o(()=>[X(m).isConfigSelected?(c(),f("div",_t,[A.value?R("",!0):(c(),f("div",gt,[s("div",ft,[t[16]||(t[16]=s("h3",null,"é€‰æ‹©è¦å®¡æ ¸çš„ç¿»è¯‘æ–‡ä»¶",-1)),s("div",ht,[l(n,{type:"success",loading:oe.value,onClick:Ge,icon:"Download"},{default:o(()=>t[14]||(t[14]=[r(" å¯¼å‡ºæ±‰åŒ–åŒ… ")])),_:1,__:[14]},8,["loading"]),l(n,{type:"primary",disabled:!de.value,loading:le.value,onClick:Je,title:de.value?"åº”ç”¨æ‰€æœ‰æ–‡ä»¶çš„ç¿»è¯‘":"è¯·å…ˆå®Œæˆæ‰€æœ‰æ–‡ä»¶çš„å®¡æ ¸"},{default:o(()=>t[15]||(t[15]=[r(" å…¨éƒ¨åº”ç”¨ç¿»è¯‘ ")])),_:1,__:[15]},8,["disabled","loading","title"])])]),s("div",yt,[l(w,{modelValue:$.value,"onUpdate:modelValue":t[1]||(t[1]=a=>$.value=a),placeholder:"æœç´¢æ–‡ä»¶åæˆ–è·¯å¾„...",clearable:"",style:{"max-width":"400px"}},{prefix:o(()=>[l(_,null,{default:o(()=>[l(X(Ce))]),_:1})]),_:1},8,["modelValue"]),$.value?(c(),f("div",mt," æ‰¾åˆ° "+y(J.value.length)+" / "+y(d.value.length)+" ä¸ªæ–‡ä»¶ ",1)):R("",!0)]),J.value.length===0&&d.value.length>0?(c(),f("div",wt,[l(i,{description:"æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æ–‡ä»¶"},{default:o(()=>[l(n,{onClick:t[2]||(t[2]=a=>$.value="")},{default:o(()=>t[17]||(t[17]=[r("æ¸…é™¤æœç´¢")])),_:1,__:[17]})]),_:1})])):d.value.length===0?(c(),f("div",xt,[l(i,{description:"æš‚æ— ç¿»è¯‘æ–‡ä»¶"},{default:o(()=>[l(n,{onClick:O},{default:o(()=>t[18]||(t[18]=[r("åˆ·æ–°")])),_:1,__:[18]})]),_:1})])):(c(),f("div",Ct,[(c(!0),f(ve,null,_e(J.value,a=>(c(),f("div",{key:a.path,class:"file-card"},[l(z,{shadow:"hover",class:"clickable",onClick:S=>ze(a)},{default:o(()=>[s("div",kt,[s("h4",null,y(a.path),1),s("p",null,y(a.type)+" - "+y(a.total_count)+" æ¡ç¿»è¯‘ (å·²å®¡æ ¸: "+y(a.approved_count)+")",1),l(P,{percentage:ye(a),color:He(a)},null,8,["percentage","color"])]),s("div",Tt,[l(n,{size:"small",type:"success",disabled:!W(a),loading:ne.value[a.path],onClick:ct(S=>Ne(a),["stop"]),title:ue(a)?"è¯¥æ–‡ä»¶æ²¡æœ‰ç¿»è¯‘å†…å®¹":W(a)?"åº”ç”¨æ­¤æ–‡ä»¶çš„ç¿»è¯‘":"è¯·å…ˆå®Œæˆæ­¤æ–‡ä»¶çš„å®¡æ ¸"},{default:o(()=>t[19]||(t[19]=[r(" åº”ç”¨ç¿»è¯‘ ")])),_:2,__:[19]},1032,["disabled","loading","onClick","title"])])]),_:2},1032,["onClick"])]))),128))]))])),A.value?(c(),f("div",bt,[s("div",Lt,[l(n,{onClick:Be,icon:"ArrowLeft",loading:N.value},{default:o(()=>t[20]||(t[20]=[r(" è¿”å›æ–‡ä»¶åˆ—è¡¨ ")])),_:1,__:[20]},8,["loading"]),s("h3",null,y(A.value.path),1),s("div",Vt,[l(M,{type:"info"},{default:o(()=>[r("æ€»è®¡: "+y(p.value.length),1)]),_:1}),l(M,{type:"success"},{default:o(()=>[r("å·²å®¡æ ¸: "+y(Fe()),1)]),_:1}),l(M,{type:"warning"},{default:o(()=>[r("å¾…å®¡æ ¸: "+y($e()),1)]),_:1}),l(M,{type:"danger"},{default:o(()=>[r("å¼•å·ä¸åŒ¹é…: "+y(Se()),1)]),_:1})])]),s("div",Mt,[s("div",At,[s("div",St,[l(Xe,{trigger:"click",placement:"bottom-start"},{dropdown:o(()=>[l(Ke,null,{default:o(()=>[s("div",Ft,[s("div",$t,[l(D,{modelValue:v.value.original,"onUpdate:modelValue":t[3]||(t[3]=a=>v.value.original=a),onChange:L},{default:o(()=>t[21]||(t[21]=[r(" åŸæ–‡ ")])),_:1,__:[21]},8,["modelValue"])]),s("div",zt,[l(D,{modelValue:v.value.translation,"onUpdate:modelValue":t[4]||(t[4]=a=>v.value.translation=a),onChange:L},{default:o(()=>t[22]||(t[22]=[r(" LLMç¿»è¯‘ ")])),_:1,__:[22]},8,["modelValue"])]),s("div",Bt,[l(D,{modelValue:v.value.approved,"onUpdate:modelValue":t[5]||(t[5]=a=>v.value.approved=a),onChange:L},{default:o(()=>t[23]||(t[23]=[r(" å®¡æ ¸ç»“æœ ")])),_:1,__:[23]},8,["modelValue"])]),s("div",jt,[l(D,{modelValue:v.value.context,"onUpdate:modelValue":t[6]||(t[6]=a=>v.value.context=a),onChange:L},{default:o(()=>t[24]||(t[24]=[r(" ä¸Šä¸‹æ–‡ ")])),_:1,__:[24]},8,["modelValue"])]),l(We,{style:{margin:"8px 0"}}),s("div",Ut,[l(n,{type:"primary",size:"small",onClick:be},{default:o(()=>t[25]||(t[25]=[r("å…¨é€‰")])),_:1,__:[25]}),l(n,{size:"small",onClick:Le},{default:o(()=>t[26]||(t[26]=[r("æ¸…ç©º")])),_:1,__:[26]})])])]),_:1})]),default:o(()=>[l(n,{type:ge.value===0?"warning":"primary",size:"small",style:{"border-top-right-radius":"0","border-bottom-right-radius":"0","border-right":"none"},title:`æœç´¢å­—æ®µ: ${Me.value}`},{default:o(()=>[r(y(ge.value)+"/4 å­—æ®µ ",1),l(_,{class:"el-icon--right"},{default:o(()=>[l(X(ut))]),_:1})]),_:1},8,["type","title"])]),_:1}),l(w,{modelValue:F.value,"onUpdate:modelValue":t[7]||(t[7]=a=>F.value=a),placeholder:"åœ¨é€‰å®šå­—æ®µä¸­æœç´¢...ï¼ˆæ”¯æŒ \\u0001 æ ¼å¼æœç´¢æ§åˆ¶å­—ç¬¦ï¼‰",style:{width:"300px","border-top-left-radius":"0","border-bottom-left-radius":"0"},clearable:"",onInput:L},{prefix:o(()=>[l(_,null,{default:o(()=>[l(X(Ce))]),_:1})]),_:1},8,["modelValue"])]),l(K,{modelValue:h.value,"onUpdate:modelValue":t[8]||(t[8]=a=>h.value=a),style:{width:"150px","margin-right":"12px"},onChange:L},{default:o(()=>[l(C,{label:"å…¨éƒ¨",value:"all"}),l(C,{label:"å·²å®¡æ ¸",value:"approved"}),l(C,{label:"æœªå®¡æ ¸",value:"unapproved"}),l(C,{label:"å·²ç¿»è¯‘",value:"translated"}),l(C,{label:"æœªç¿»è¯‘",value:"empty"})]),_:1},8,["modelValue"]),l(K,{modelValue:b.value,"onUpdate:modelValue":t[9]||(t[9]=a=>b.value=a),style:{width:"180px","margin-right":"12px"},onChange:L},{default:o(()=>[l(C,{label:"å…¨éƒ¨å»ºè®®",value:"all"}),l(C,{label:"LLMå»ºè®®ç¿»è¯‘",value:"suggested"}),l(C,{label:"LLMä¸å»ºè®®ç¿»è¯‘",value:"not_suggested"})]),_:1},8,["modelValue"]),l(K,{modelValue:B.value,"onUpdate:modelValue":t[10]||(t[10]=a=>B.value=a),style:{width:"180px","margin-right":"12px"},onChange:L},{default:o(()=>[l(C,{label:"å…¨éƒ¨æ¡ç›®",value:"all"}),l(C,{label:"å•è¯åŸæ–‡",value:"word_only"}),l(C,{label:"å¼•å·ä¸åŒ¹é…",value:"quote_mismatch"})]),_:1},8,["modelValue"]),l(K,{modelValue:H.value,"onUpdate:modelValue":t[11]||(t[11]=a=>H.value=a),style:{width:"120px","margin-right":"12px"},onChange:L},{default:o(()=>[l(C,{label:"50æ¡/é¡µ",value:50}),l(C,{label:"10æ¡/é¡µ",value:10}),l(C,{label:"100æ¡/é¡µ",value:100})]),_:1},8,["modelValue"])]),s("div",Pt,[s("div",Rt,[l(n,{type:"primary",onClick:I,loading:N.value},{default:o(()=>t[27]||(t[27]=[r(" ä¿å­˜å®¡æ ¸è¿›åº¦ ")])),_:1,__:[27]},8,["loading"])]),s("div",Et,[l(n,{type:"success",onClick:Oe,loading:ee.value},{default:o(()=>[r(" å…¨éƒ¨åº”ç”¨LLMç¿»è¯‘ ("+y(V.value.length)+"æ¡) ",1)]),_:1},8,["loading"]),l(n,{type:"info",onClick:Ie,loading:te.value},{default:o(()=>[r(" å…¨éƒ¨ä¿ç•™åŸæ–‡ ("+y(V.value.length)+"æ¡) ",1)]),_:1},8,["loading"]),l(n,{type:"danger",onClick:De,loading:ae.value},{default:o(()=>[r(" å…¨éƒ¨é‡ç½®å®¡æ ¸çŠ¶æ€ ("+y(V.value.length)+"æ¡) ",1)]),_:1},8,["loading"])])])]),s("div",Ot,[l(dt,{name:"translation-item",tag:"div"},{default:o(()=>[(c(!0),f(ve,null,_e(Ae.value,a=>(c(),f("div",{key:a.translation_key||`${a.file_name}-${a.original_text}`,class:Te(["translation-item",{approved:a.approved,"quote-mismatch":G(a)}])},[l(z,null,{default:o(()=>[s("div",It,[s("div",Dt,[l(M,{type:a.approved?"success":"warning",size:"small"},{default:o(()=>[r(y(a.approved?"å·²å®¡æ ¸":"å¾…å®¡æ ¸"),1)]),_:2},1032,["type"]),a.is_suggested_to_translate?(c(),Z(M,{key:0,type:"primary",size:"small"},{default:o(()=>t[28]||(t[28]=[r(" LLMå»ºè®®ç¿»è¯‘ ")])),_:1,__:[28]})):(c(),Z(M,{key:1,type:"info",size:"small"},{default:o(()=>t[29]||(t[29]=[r(" LLMä¸å»ºè®®ç¿»è¯‘ ")])),_:1,__:[29]})),G(a)?(c(),Z(M,{key:2,type:"danger",size:"small"},{default:o(()=>t[30]||(t[30]=[r(" å¼•å·ä¸åŒ¹é… ")])),_:1,__:[30]})):R("",!0)]),s("div",Qt,"#"+y(Re(a)+1),1)]),s("div",qt,[s("div",Ht,[s("div",Nt,[t[31]||(t[31]=s("label",null,"åŸæ–‡:",-1)),s("div",{class:"original-text",innerHTML:ie(a.original_text)},null,8,Jt)])]),s("div",Gt,[s("div",Wt,[t[32]||(t[32]=s("label",null,"LLMç¿»è¯‘ç»“æœ:",-1)),s("div",{class:Te(["machine-translation",{empty:!a.translation}])},[a.translation?(c(),f("span",{key:0,innerHTML:ie(a.translation)},null,8,Kt)):(c(),f("span",Xt,"æœªç¿»è¯‘"))],2)])]),s("div",Yt,[s("div",Zt,[t[34]||(t[34]=s("label",null,"å®¡æ ¸ç»“æœ:",-1)),l(w,{modelValue:a.approved_text,"onUpdate:modelValue":S=>a.approved_text=S,type:"textarea",rows:3,placeholder:"è¯·è¾“å…¥å®¡æ ¸åçš„ç¿»è¯‘ç»“æœ...ï¼ˆæ”¯æŒ \\u0001 æ ¼å¼çš„è½¬ä¹‰å­—ç¬¦ï¼‰",onChange:S=>Ee(a)},null,8,["modelValue","onUpdate:modelValue","onChange"]),a.approved_text?(c(),f("div",ea,[t[33]||(t[33]=s("div",{class:"preview-label"},"é¢„è§ˆæ•ˆæœ:",-1)),s("div",{innerHTML:ie(a.approved_text)},null,8,ta)])):R("",!0)])]),a.context?(c(),f("div",aa,[l(M,{size:"small",type:"info"},{default:o(()=>[r("ä¸Šä¸‹æ–‡: "+y(a.context),1)]),_:2},1024)])):R("",!0),a.llm_reason?(c(),f("div",la,[l(Ye,{title:a.is_suggested_to_translate?"LLMå»ºè®®ç¿»è¯‘:":"LLMä¸å»ºè®®ç¿»è¯‘:",type:a.is_suggested_to_translate?"success":"warning",description:a.llm_reason,"show-icon":"",closable:!1},null,8,["title","type","description"])])):R("",!0),s("div",na,[l(n,{size:"small",onClick:S=>je(a)},{default:o(()=>t[35]||(t[35]=[r(" åº”ç”¨LLMç¿»è¯‘ ")])),_:2,__:[35]},1032,["onClick"]),l(n,{size:"small",type:"info",onClick:S=>Pe(a)},{default:o(()=>t[36]||(t[36]=[r(" ä¿ç•™åŸæ–‡ ")])),_:2,__:[36]},1032,["onClick"]),l(n,{size:"small",type:"warning",onClick:S=>Ue(a)},{default:o(()=>t[37]||(t[37]=[r(" é‡ç½® ")])),_:2,__:[37]},1032,["onClick"])]),a.suggestions&&a.suggestions.length>0?(c(),f("div",oa,[t[38]||(t[38]=s("p",null,"ç¿»è¯‘å»ºè®®:",-1)),s("div",sa,[(c(!0),f(ve,null,_e(a.suggestions,(S,et)=>(c(),Z(M,{key:et,onClick:ua=>Qe(a,S),class:"clickable-tag"},{default:o(()=>[r(y(S),1)]),_:2},1032,["onClick"]))),128))])])):R("",!0)])]),_:2},1024)],2))),128))]),_:1})]),s("div",ra,[l(Ze,{"current-page":E.value,"page-size":H.value,total:V.value.length,layout:"prev, pager, next, jumper, total",onCurrentChange:Ve},null,8,["current-page","page-size","total"])])])):R("",!0)])):(c(),f("div",vt,[l(i,{description:"è¯·å…ˆé€‰æ‹©é…ç½®"},{default:o(()=>[l(n,{type:"primary",onClick:t[0]||(t[0]=a=>e.$router.push("/"))},{default:o(()=>t[13]||(t[13]=[r(" å»é…ç½®ç®¡ç† ")])),_:1,__:[13]})]),_:1})]))]),_:1})])}}},pa=st(ia,[["__scopeId","data-v-2e282ab0"]]);export{pa as default};
