var Ze=Object.defineProperty,et=Object.defineProperties;var tt=Object.getOwnPropertyDescriptors;var fe=Object.getOwnPropertySymbols;var at=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable;var he=(k,y,d)=>y in k?Ze(k,y,{enumerable:!0,configurable:!0,writable:!0,value:d}):k[y]=d,ye=(k,y)=>{for(var d in y||(y={}))at.call(y,d)&&he(k,d,y[d]);if(fe)for(var d of fe(y))lt.call(y,d)&&he(k,d,y[d]);return k},me=(k,y)=>et(k,tt(y));var b=(k,y,d)=>new Promise((z,v)=>{var j=m=>{try{p(d.next(m))}catch(M){v(M)}},S=m=>{try{p(d.throw(m))}catch(M){v(M)}},p=m=>m.done?z(m.value):Promise.resolve(m.value).then(j,S);p((d=d.apply(k,y)).next())});import{_ as nt,u as ot,r as _,s as we,c as I,o as st,d as g,e as c,f as l,w as o,l as X,j as x,m as r,h as B,i as s,B as xe,t as h,F as ue,k as de,C as rt,T as it,p as ce,E as u,b as Q,D as ut,A as Ce,g as Y}from"./index-wIxDU7xz.js";const dt={class:"review-view"},ct={key:0,class:"empty-state"},pt={key:1},vt={key:0,class:"files-section"},_t={class:"files-header"},gt={class:"header-actions"},ft={class:"file-search-container"},ht={key:0,class:"search-stats"},yt={key:0,class:"empty-state"},mt={key:1,class:"empty-state"},wt={key:2,class:"translation-files"},xt={class:"file-info"},Ct={class:"file-actions"},kt={key:1,class:"review-section"},bt={class:"review-header"},Tt={class:"review-stats"},Lt={class:"filter-actions"},Vt={class:"filter-row"},Mt={class:"search-container"},At={class:"search-fields-selector"},St={class:"field-option"},$t={class:"field-option"},zt={class:"field-option"},Ft={class:"field-option"},Bt={class:"field-actions"},jt={class:"action-row"},Ut={class:"action-group"},Pt={class:"action-group"},Rt={class:"translations-container"},Et={class:"translation-header"},Ot={class:"item-status"},It={class:"item-number"},Qt={class:"translation-content"},Dt={class:"content-row"},Ht={class:"content-section"},qt=["innerHTML"],Nt={class:"content-row"},Jt={class:"content-section"},Gt=["innerHTML"],Wt={key:1},Kt={class:"content-row"},Xt={class:"content-section"},Yt={key:0,class:"preview-text"},Zt=["innerHTML"],ea={key:0,class:"context-info"},ta={key:1,class:"llm-reason"},aa={class:"translation-actions"},la={key:2,class:"suggestions"},na={class:"suggestion-list"},oa={class:"pagination-container"},sa={__name:"ReviewView",setup(k){const y=ot(),d=_([]),z=_(null),v=_([]),j=_(""),S=_(""),p=_({original:!0,translation:!0,approved:!0,context:!0}),m=_("all"),M=_("all"),P=_("all"),D=_(1),H=_(50),N=_(!1),Z=_(!1),ee=_(!1),te=_(!1),ae=_(!1),le=_({}),ne=_(!1),U=_(new Set);_(0);const T=()=>{D.value=1},ke=()=>{p.value={original:!0,translation:!0,approved:!0,context:!0},T()},be=()=>{p.value={original:!1,translation:!1,approved:!1,context:!1},T()},Te=e=>{D.value=e;const t=document.querySelector(".translations-container");t&&t.scrollIntoView({behavior:"smooth",block:"start"})};we(U,e=>{e.size>0&&e.size%5===0&&Qe()},{deep:!0});const J=I(()=>{if(!S.value)return d.value;const e=S.value.toLowerCase();return d.value.filter(t=>t.path.toLowerCase().includes(e))}),pe=I(()=>Object.values(p.value).filter(Boolean).length),Le=I(()=>{const e=[];return p.value.original&&e.push("原文"),p.value.translation&&e.push("翻译"),p.value.approved&&e.push("审核"),p.value.context&&e.push("上下文"),e.length===0?"无字段":e.length===4?"全部字段":e.join("、")}),L=I(()=>{let e=v.value;if(j.value){const t=j.value.toLowerCase(),n=ve(t);e=e.filter(i=>{const f=[];if(p.value.original){const w=oe(i.original_text).toLowerCase();f.push(i.original_text.toLowerCase().includes(t)||i.original_text.toLowerCase().includes(n)||w.includes(t))}if(p.value.translation&&i.translation){const w=oe(i.translation).toLowerCase();f.push(i.translation.toLowerCase().includes(t)||i.translation.toLowerCase().includes(n)||w.includes(t))}if(p.value.approved&&i.approved_text){const w=oe(i.approved_text).toLowerCase();f.push(i.approved_text.toLowerCase().includes(t)||i.approved_text.toLowerCase().includes(n)||w.includes(t))}return p.value.context&&i.context&&f.push(i.context.toLowerCase().includes(t)),f.length>0&&f.some(w=>w===!0)})}return m.value!=="all"&&(e=e.filter(t=>m.value==="approved"?t.approved===!0:m.value==="unapproved"?t.approved!==!0:m.value==="translated"?t.translation&&t.translation.trim()!=="":m.value==="empty"?!t.translation||t.translation.trim()==="":!0)),M.value!=="all"&&(e=e.filter(t=>M.value==="suggested"?t.is_suggested_to_translate===!0:M.value==="not_suggested"?t.is_suggested_to_translate===!1:!0)),P.value!=="all"&&(e=e.filter(t=>P.value==="word_only"?t.original_text&&!t.original_text.includes(" "):P.value==="quote_mismatch"?G(t):!0)),e}),Ve=I(()=>{const e=(D.value-1)*H.value,t=e+H.value;return L.value.slice(e,t)}),Me=()=>v.value.filter(e=>G(e)).length,Ae=()=>v.value.filter(e=>e.approved===!0).length,Se=()=>v.value.filter(e=>e.approved!==!0).length,q=()=>b(null,null,function*(){try{const e=yield ce.getTranslations();e.error?u.error(e.error):d.value=e}catch(e){u.error("加载翻译文件失败")}}),$e=e=>b(null,null,function*(){try{z.value=e;const t=yield ce.getTranslationReview(e.path);t.error?u.error(t.error):(v.value=t.translations.map(n=>me(ye({},n),{suggestions:[]})),D.value=1,m.value="unapproved")}catch(t){u.error("加载翻译内容失败")}}),ze=()=>b(null,null,function*(){if(U.value.size>0)try{yield R(),u.success("返回时自动保存成功")}catch(e){u.error("自动保存失败，但仍然返回文件列表"),console.error("返回时自动保存失败:",e)}z.value=null,v.value=[],U.value.clear(),m.value="all",M.value="all",P.value="all",j.value="",S.value="",q()}),F=e=>{const t=v.value.findIndex(n=>n===e);t!==-1&&(U.value.add(t),e.approved_text&&e.approved_text.trim()!==""&&(e.approved=!0))},Fe=e=>{e.approved_text=e.translation||"",F(e)},Be=e=>{e.approved_text="",e.approved=!1,F(e)},je=e=>{e.approved_text=e.original_text||"",e.approved=!0,F(e)},Ue=e=>v.value.findIndex(t=>t===e),oe=e=>e&&e.replace(/[\u0000-\u001f\u007f-\u009f]/g,t=>`\\u${t.charCodeAt(0).toString(16).padStart(4,"0")}`),se=e=>e&&e.replace(/[\u0000-\u001f\u007f-\u009f]/g,t=>`<span class="unicode-escape">\\u${t.charCodeAt(0).toString(16).padStart(4,"0")}</span>`),ve=e=>e&&e.replace(/\\u([0-9a-fA-F]{4})/g,(t,n)=>String.fromCharCode(parseInt(n,16))),_e=e=>{if(!e)return!1;const t=(e.match(/"/g)||[]).length,n=(e.match(/"/g)||[]).length,i=(e.match(/"/g)||[]).length,f=(e.match(/「/g)||[]).length,w=(e.match(/」/g)||[]).length,E=(e.match(/『/g)||[]).length,$=(e.match(/』/g)||[]).length;return[t,n,i,f,w,E,$].some(O=>O%2!==0)},G=e=>e.approved_text&&e.approved_text.trim()!==""?_e(e.approved_text):e.translation&&e.translation.trim()!==""?_e(e.translation):!1,Pe=e=>{const t=ve(e.approved_text);t!==e.approved_text&&(e.approved_text=t),F(e)},Re=()=>b(null,null,function*(){try{const e=L.value.length;yield Q.confirm(`确定要将当前过滤的 ${e} 条翻译全部应用LLM翻译结果吗？这将覆盖已有的审核结果。`,"批量应用LLM翻译确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),Z.value=!0,L.value.forEach(t=>{const n=v.value.findIndex(i=>i===t);n!==-1&&(v.value[n].approved_text=t.translation||"",v.value[n].approved=!0,F(t))}),yield R(),u.success(`已将 ${e} 条翻译应用LLM翻译结果并保存`)}catch(e){}finally{Z.value=!1}}),Ee=()=>b(null,null,function*(){try{const e=L.value.length;yield Q.confirm(`确定要将当前过滤的 ${e} 条翻译全部保留原文吗？`,"批量保留原文确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),ee.value=!0,L.value.forEach(t=>{const n=v.value.findIndex(i=>i===t);n!==-1&&(v.value[n].approved_text=t.original_text||"",v.value[n].approved=!0,F(t))}),yield R(),u.success(`已将 ${e} 条翻译标记为保留原文并保存`)}catch(e){}finally{ee.value=!1}}),Oe=()=>b(null,null,function*(){try{const e=L.value.length;yield Q.confirm(`确定要重置当前过滤的 ${e} 条翻译的审核状态吗？这将清空所有审核结果并将状态设置为未审核。`,"重置审核状态确认",{confirmButtonText:"确定重置",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0,message:`<div>
          <p>此操作将：</p>
          <ul style="text-align: left; margin: 10px 0;">
            <li>清空所有已审核的翻译结果</li>
            <li>将审核状态设置为"未审核"</li>
            <li>自动保存修改</li>
          </ul>
          <p><strong>注意：此操作不可撤销！</strong></p>
        </div>`}),te.value=!0,L.value.forEach(t=>{const n=v.value.findIndex(i=>i===t);n!==-1&&(v.value[n].approved_text="",v.value[n].approved=!1,F(t))}),yield R(),u.success(`已重置 ${e} 条翻译的审核状态并保存`)}catch(e){}finally{te.value=!1}}),Ie=(e,t)=>{e.approved_text=t,F(e)},R=()=>b(null,null,function*(){try{N.value=!0;const e=yield ce.saveTranslationReview(z.value.path,v.value);e.success?(u.success("审核结果保存成功"),U.value.clear(),q()):u.error(e.message)}catch(e){u.error("保存审核结果失败")}finally{N.value=!1}}),Qe=()=>b(null,null,function*(){if(U.value.size!==0)try{const e=U.value.size;yield R(),u.success(`自动保存成功 (${e} 条修改)`)}catch(e){console.error("自动保存失败:",e)}}),ge=e=>e.total_count===0?100:Math.round(e.approved_count/e.total_count*100),De=e=>{const t=ge(e);return t===100?"#67c23a":t>=70?"#e6a23c":"#f56c6c"},W=e=>e.total_count===0?!1:e.total_count>0&&e.approved_count===e.total_count,re=e=>e.total_count===0,ie=I(()=>{const e=J.value.filter(t=>!re(t));return e.length>0&&e.every(t=>W(t))}),He=e=>b(null,null,function*(){if(re(e)){u.info("该文件没有翻译内容，无需应用翻译");return}if(!W(e)){u.warning("请先完成此文件的审核");return}try{yield Q.confirm(`确定要应用文件 "${e.path}" 的翻译吗？`,"应用翻译确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),le.value[e.path]=!0;const n=yield(yield fetch("/api/apply-translations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_path:e.path,apply_all:!1})})).json();n.success?u.success(`文件 "${e.path}" 翻译应用成功`):u.error(n.message||"应用翻译失败")}catch(t){t!=="cancel"&&u.error("应用翻译失败")}finally{le.value[e.path]=!1}}),qe=()=>b(null,null,function*(){if(!ie.value){u.warning("请先完成所有文件的审核");return}try{yield Q.confirm(`确定要应用所有文件的翻译吗？共 ${d.value.length} 个文件。`,"批量应用翻译确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),ae.value=!0;const t=yield(yield fetch("/api/apply-translations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apply_all:!0})})).json();t.success?u.success("所有文件翻译应用成功"):u.error(t.message||"应用翻译失败")}catch(e){e!=="cancel"&&u.error("应用翻译失败")}finally{ae.value=!1}}),Ne=()=>b(null,null,function*(){try{yield Q.confirm("确定要导出翻译包吗？这将打包所有已翻译的文件。","导出翻译包确认",{confirmButtonText:"确定导出",cancelButtonText:"取消",type:"info"}),ne.value=!0;const e=yield fetch("/api/export_translation_package",{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok){const t=e.headers.get("content-type");if(t&&t.includes("application/zip")){const n=yield e.blob(),i=window.URL.createObjectURL(n),f=document.createElement("a");f.style.display="none",f.href=i;const w=e.headers.get("content-disposition");let E="translation_package.zip";if(w){const $=w.match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/);$&&$[1]&&(E=$[1].replace(/['"]/g,""))}f.download=E,document.body.appendChild(f),f.click(),window.URL.revokeObjectURL(i),document.body.removeChild(f),u.success("翻译包导出成功")}else{const n=yield e.json();n.success?u.success("翻译包导出成功"):u.error(n.message||"导出翻译包失败")}}else{const t=yield e.json();u.error(t.message||"导出翻译包失败")}}catch(e){e!=="cancel"&&(console.error("导出翻译包失败:",e),u.error("导出翻译包失败"))}finally{ne.value=!1}});return we(()=>y.isConfigSelected,e=>{e&&d.value.length===0&&q()}),st(()=>{y.isConfigSelected&&q()}),(e,t)=>{const n=x("el-button"),i=x("el-empty"),f=x("el-icon"),w=x("el-input"),E=x("el-progress"),$=x("el-card"),V=x("el-tag"),O=x("el-checkbox"),Je=x("el-divider"),Ge=x("el-dropdown-menu"),We=x("el-dropdown"),C=x("el-option"),K=x("el-select"),Ke=x("el-alert"),Xe=x("el-pagination");return c(),g("div",dt,[l($,{class:"header-card"},{header:o(()=>t[12]||(t[12]=[s("div",{class:"card-header"},[s("span",null,"📝 翻译审核"),s("p",null,"审核和编辑翻译内容")],-1)])),default:o(()=>[X(y).isConfigSelected?(c(),g("div",pt,[z.value?B("",!0):(c(),g("div",vt,[s("div",_t,[t[16]||(t[16]=s("h3",null,"选择要审核的翻译文件",-1)),s("div",gt,[l(n,{type:"success",loading:ne.value,onClick:Ne,icon:"Download"},{default:o(()=>t[14]||(t[14]=[r(" 导出汉化包 ")])),_:1,__:[14]},8,["loading"]),l(n,{type:"primary",disabled:!ie.value,loading:ae.value,onClick:qe,title:ie.value?"应用所有文件的翻译":"请先完成所有文件的审核"},{default:o(()=>t[15]||(t[15]=[r(" 全部应用翻译 ")])),_:1,__:[15]},8,["disabled","loading","title"])])]),s("div",ft,[l(w,{modelValue:S.value,"onUpdate:modelValue":t[1]||(t[1]=a=>S.value=a),placeholder:"搜索文件名或路径...",clearable:"",style:{"max-width":"400px"}},{prefix:o(()=>[l(f,null,{default:o(()=>[l(X(xe))]),_:1})]),_:1},8,["modelValue"]),S.value?(c(),g("div",ht," 找到 "+h(J.value.length)+" / "+h(d.value.length)+" 个文件 ",1)):B("",!0)]),J.value.length===0&&d.value.length>0?(c(),g("div",yt,[l(i,{description:"没有找到匹配的文件"},{default:o(()=>[l(n,{onClick:t[2]||(t[2]=a=>S.value="")},{default:o(()=>t[17]||(t[17]=[r("清除搜索")])),_:1,__:[17]})]),_:1})])):d.value.length===0?(c(),g("div",mt,[l(i,{description:"暂无翻译文件"},{default:o(()=>[l(n,{onClick:q},{default:o(()=>t[18]||(t[18]=[r("刷新")])),_:1,__:[18]})]),_:1})])):(c(),g("div",wt,[(c(!0),g(ue,null,de(J.value,a=>(c(),g("div",{key:a.path,class:"file-card"},[l($,{shadow:"hover",class:"clickable",onClick:A=>$e(a)},{default:o(()=>[s("div",xt,[s("h4",null,h(a.path),1),s("p",null,h(a.type)+" - "+h(a.total_count)+" 条翻译 (已审核: "+h(a.approved_count)+")",1),l(E,{percentage:ge(a),color:De(a)},null,8,["percentage","color"])]),s("div",Ct,[l(n,{size:"small",type:"success",disabled:!W(a),loading:le.value[a.path],onClick:ut(A=>He(a),["stop"]),title:re(a)?"该文件没有翻译内容":W(a)?"应用此文件的翻译":"请先完成此文件的审核"},{default:o(()=>t[19]||(t[19]=[r(" 应用翻译 ")])),_:2,__:[19]},1032,["disabled","loading","onClick","title"])])]),_:2},1032,["onClick"])]))),128))]))])),z.value?(c(),g("div",kt,[s("div",bt,[l(n,{onClick:ze,icon:"ArrowLeft",loading:N.value},{default:o(()=>t[20]||(t[20]=[r(" 返回文件列表 ")])),_:1,__:[20]},8,["loading"]),s("h3",null,h(z.value.path),1),s("div",Tt,[l(V,{type:"info"},{default:o(()=>[r("总计: "+h(v.value.length),1)]),_:1}),l(V,{type:"success"},{default:o(()=>[r("已审核: "+h(Ae()),1)]),_:1}),l(V,{type:"warning"},{default:o(()=>[r("待审核: "+h(Se()),1)]),_:1}),l(V,{type:"danger"},{default:o(()=>[r("引号不匹配: "+h(Me()),1)]),_:1})])]),s("div",Lt,[s("div",Vt,[s("div",Mt,[l(We,{trigger:"click",placement:"bottom-start"},{dropdown:o(()=>[l(Ge,null,{default:o(()=>[s("div",At,[s("div",St,[l(O,{modelValue:p.value.original,"onUpdate:modelValue":t[3]||(t[3]=a=>p.value.original=a),onChange:T},{default:o(()=>t[21]||(t[21]=[r(" 原文 ")])),_:1,__:[21]},8,["modelValue"])]),s("div",$t,[l(O,{modelValue:p.value.translation,"onUpdate:modelValue":t[4]||(t[4]=a=>p.value.translation=a),onChange:T},{default:o(()=>t[22]||(t[22]=[r(" LLM翻译 ")])),_:1,__:[22]},8,["modelValue"])]),s("div",zt,[l(O,{modelValue:p.value.approved,"onUpdate:modelValue":t[5]||(t[5]=a=>p.value.approved=a),onChange:T},{default:o(()=>t[23]||(t[23]=[r(" 审核结果 ")])),_:1,__:[23]},8,["modelValue"])]),s("div",Ft,[l(O,{modelValue:p.value.context,"onUpdate:modelValue":t[6]||(t[6]=a=>p.value.context=a),onChange:T},{default:o(()=>t[24]||(t[24]=[r(" 上下文 ")])),_:1,__:[24]},8,["modelValue"])]),l(Je,{style:{margin:"8px 0"}}),s("div",Bt,[l(n,{type:"primary",size:"small",onClick:ke},{default:o(()=>t[25]||(t[25]=[r("全选")])),_:1,__:[25]}),l(n,{size:"small",onClick:be},{default:o(()=>t[26]||(t[26]=[r("清空")])),_:1,__:[26]})])])]),_:1})]),default:o(()=>[l(n,{type:pe.value===0?"warning":"primary",size:"small",style:{"border-top-right-radius":"0","border-bottom-right-radius":"0","border-right":"none"},title:`搜索字段: ${Le.value}`},{default:o(()=>[r(h(pe.value)+"/4 字段 ",1),l(f,{class:"el-icon--right"},{default:o(()=>[l(X(rt))]),_:1})]),_:1},8,["type","title"])]),_:1}),l(w,{modelValue:j.value,"onUpdate:modelValue":t[7]||(t[7]=a=>j.value=a),placeholder:"在选定字段中搜索...（支持 \\u0001 格式搜索控制字符）",style:{width:"300px","border-top-left-radius":"0","border-bottom-left-radius":"0"},clearable:"",onInput:T},{prefix:o(()=>[l(f,null,{default:o(()=>[l(X(xe))]),_:1})]),_:1},8,["modelValue"])]),l(K,{modelValue:m.value,"onUpdate:modelValue":t[8]||(t[8]=a=>m.value=a),style:{width:"150px","margin-right":"12px"},onChange:T},{default:o(()=>[l(C,{label:"全部",value:"all"}),l(C,{label:"已审核",value:"approved"}),l(C,{label:"未审核",value:"unapproved"}),l(C,{label:"已翻译",value:"translated"}),l(C,{label:"未翻译",value:"empty"})]),_:1},8,["modelValue"]),l(K,{modelValue:M.value,"onUpdate:modelValue":t[9]||(t[9]=a=>M.value=a),style:{width:"180px","margin-right":"12px"},onChange:T},{default:o(()=>[l(C,{label:"全部建议",value:"all"}),l(C,{label:"LLM建议翻译",value:"suggested"}),l(C,{label:"LLM不建议翻译",value:"not_suggested"})]),_:1},8,["modelValue"]),l(K,{modelValue:P.value,"onUpdate:modelValue":t[10]||(t[10]=a=>P.value=a),style:{width:"180px","margin-right":"12px"},onChange:T},{default:o(()=>[l(C,{label:"全部条目",value:"all"}),l(C,{label:"单词原文",value:"word_only"}),l(C,{label:"引号不匹配",value:"quote_mismatch"})]),_:1},8,["modelValue"]),l(K,{modelValue:H.value,"onUpdate:modelValue":t[11]||(t[11]=a=>H.value=a),style:{width:"120px","margin-right":"12px"},onChange:T},{default:o(()=>[l(C,{label:"50条/页",value:50}),l(C,{label:"10条/页",value:10}),l(C,{label:"100条/页",value:100})]),_:1},8,["modelValue"])]),s("div",jt,[s("div",Ut,[l(n,{type:"primary",onClick:R,loading:N.value},{default:o(()=>t[27]||(t[27]=[r(" 保存审核进度 ")])),_:1,__:[27]},8,["loading"])]),s("div",Pt,[l(n,{type:"success",onClick:Re,loading:Z.value},{default:o(()=>[r(" 全部应用LLM翻译 ("+h(L.value.length)+"条) ",1)]),_:1},8,["loading"]),l(n,{type:"info",onClick:Ee,loading:ee.value},{default:o(()=>[r(" 全部保留原文 ("+h(L.value.length)+"条) ",1)]),_:1},8,["loading"]),l(n,{type:"danger",onClick:Oe,loading:te.value},{default:o(()=>[r(" 全部重置审核状态 ("+h(L.value.length)+"条) ",1)]),_:1},8,["loading"])])])]),s("div",Rt,[l(it,{name:"translation-item",tag:"div"},{default:o(()=>[(c(!0),g(ue,null,de(Ve.value,a=>(c(),g("div",{key:a.translation_key||`${a.file_name}-${a.original_text}`,class:Ce(["translation-item",{approved:a.approved,"quote-mismatch":G(a)}])},[l($,null,{default:o(()=>[s("div",Et,[s("div",Ot,[l(V,{type:a.approved?"success":"warning",size:"small"},{default:o(()=>[r(h(a.approved?"已审核":"待审核"),1)]),_:2},1032,["type"]),a.is_suggested_to_translate?(c(),Y(V,{key:0,type:"primary",size:"small"},{default:o(()=>t[28]||(t[28]=[r(" LLM建议翻译 ")])),_:1,__:[28]})):(c(),Y(V,{key:1,type:"info",size:"small"},{default:o(()=>t[29]||(t[29]=[r(" LLM不建议翻译 ")])),_:1,__:[29]})),G(a)?(c(),Y(V,{key:2,type:"danger",size:"small"},{default:o(()=>t[30]||(t[30]=[r(" 引号不匹配 ")])),_:1,__:[30]})):B("",!0)]),s("div",It,"#"+h(Ue(a)+1),1)]),s("div",Qt,[s("div",Dt,[s("div",Ht,[t[31]||(t[31]=s("label",null,"原文:",-1)),s("div",{class:"original-text",innerHTML:se(a.original_text)},null,8,qt)])]),s("div",Nt,[s("div",Jt,[t[32]||(t[32]=s("label",null,"LLM翻译结果:",-1)),s("div",{class:Ce(["machine-translation",{empty:!a.translation}])},[a.translation?(c(),g("span",{key:0,innerHTML:se(a.translation)},null,8,Gt)):(c(),g("span",Wt,"未翻译"))],2)])]),s("div",Kt,[s("div",Xt,[t[34]||(t[34]=s("label",null,"审核结果:",-1)),l(w,{modelValue:a.approved_text,"onUpdate:modelValue":A=>a.approved_text=A,type:"textarea",rows:3,placeholder:"请输入审核后的翻译结果...（支持 \\u0001 格式的转义字符）",onChange:A=>Pe(a)},null,8,["modelValue","onUpdate:modelValue","onChange"]),a.approved_text?(c(),g("div",Yt,[t[33]||(t[33]=s("div",{class:"preview-label"},"预览效果:",-1)),s("div",{innerHTML:se(a.approved_text)},null,8,Zt)])):B("",!0)])]),a.context?(c(),g("div",ea,[l(V,{size:"small",type:"info"},{default:o(()=>[r("上下文: "+h(a.context),1)]),_:2},1024)])):B("",!0),a.llm_reason?(c(),g("div",ta,[l(Ke,{title:a.is_suggested_to_translate?"LLM建议翻译:":"LLM不建议翻译:",type:a.is_suggested_to_translate?"success":"warning",description:a.llm_reason,"show-icon":"",closable:!1},null,8,["title","type","description"])])):B("",!0),s("div",aa,[l(n,{size:"small",onClick:A=>Fe(a)},{default:o(()=>t[35]||(t[35]=[r(" 应用LLM翻译 ")])),_:2,__:[35]},1032,["onClick"]),l(n,{size:"small",type:"info",onClick:A=>je(a)},{default:o(()=>t[36]||(t[36]=[r(" 保留原文 ")])),_:2,__:[36]},1032,["onClick"]),l(n,{size:"small",type:"warning",onClick:A=>Be(a)},{default:o(()=>t[37]||(t[37]=[r(" 重置 ")])),_:2,__:[37]},1032,["onClick"])]),a.suggestions&&a.suggestions.length>0?(c(),g("div",la,[t[38]||(t[38]=s("p",null,"翻译建议:",-1)),s("div",na,[(c(!0),g(ue,null,de(a.suggestions,(A,Ye)=>(c(),Y(V,{key:Ye,onClick:ra=>Ie(a,A),class:"clickable-tag"},{default:o(()=>[r(h(A),1)]),_:2},1032,["onClick"]))),128))])])):B("",!0)])]),_:2},1024)],2))),128))]),_:1})]),s("div",oa,[l(Xe,{"current-page":D.value,"page-size":H.value,total:L.value.length,layout:"prev, pager, next, jumper, total",onCurrentChange:Te},null,8,["current-page","page-size","total"])])])):B("",!0)])):(c(),g("div",ct,[l(i,{description:"请先选择配置"},{default:o(()=>[l(n,{type:"primary",onClick:t[0]||(t[0]=a=>e.$router.push("/"))},{default:o(()=>t[13]||(t[13]=[r(" 去配置管理 ")])),_:1,__:[13]})]),_:1})]))]),_:1})])}}},da=nt(sa,[["__scopeId","data-v-9bfd6443"]]);export{da as default};
